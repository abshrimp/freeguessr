(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{7778:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/Settings",function(){return s(5144)}])},5144:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var n=s(4848),a=s(6540),i=s(9009),l=s.n(i);let o=e=>{let{title:t,icon:s,enabled:a,onToggle:i}=e;return(0,n.jsxs)("div",{className:l().featureItem,children:[(0,n.jsx)("div",{children:t}),(0,n.jsx)("img",{src:s,alt:t,className:l().featureIcon}),(0,n.jsx)("div",{className:l().toggle,children:(0,n.jsx)("label",{className:l().toggleButton,children:(0,n.jsx)("input",{type:"checkbox",checked:a,onChange:i})})})]})},c=e=>{let{setScreen:t,saveData:s,setSaveData:i,sender:c,getPlace:r}=e,[d,g]=(0,a.useState)(110),[m,u]=(0,a.useState)(!0),[_,x]=(0,a.useState)(!0),[h,p]=(0,a.useState)(!0),[v,j]=(0,a.useState)(!0);(0,a.useEffect)(()=>{j(110===d&&m&&_&&h)},[d,m,_,h]),(0,a.useEffect)(()=>{let e=document.querySelector(".".concat(l().slider)),t=document.querySelector(".".concat(l().toggleButton," input")),s=e=>{g(Number(e.target.value))},n=()=>{g(110),u(!0),x(!0),p(!0)};return e&&e.addEventListener("input",s),t&&t.addEventListener("change",n),()=>{e&&e.removeEventListener("input",s),t&&t.removeEventListener("change",n)}},[]),(0,a.useEffect)(()=>{let e=document.querySelector(".".concat(l().slider));if(e){let t=d/600*100;e.style.background="linear-gradient(90deg, ".concat("#8B4513"," ").concat(t,"%, ").concat("#dddddd"," ").concat(t,"%)")}},[d]);let b=async()=>{if("flex"==loading.style.display)return;let e=async()=>{var e=new XMLHttpRequest;return e.open("HEAD","".concat(location.href,"?nocache=").concat(Date.now()),!1),e.send(null),new Date(e.getResponseHeader("Date"))-new Date};loading.style.display="flex";let s=await r(1),n=0;m||(n+=1),_||(n+=10),h||(n+=100);let a=await e();i({map_id:1,score_scale:212.856,game_type:n,stage_num:4,limit_time:(d+10)%610,score:0,duration:0,send_flag:!0,question:{stage:0,start_time:new Date().getTime()+a,pano_id:null,heading:null,lat:s[0],lng:s[1],guess_lat:null,guess_lng:null,score:0,duration:null}}),t("play")};return(0,a.useEffect)(()=>{let e=e=>{"Enter"===e.key&&b()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[d,m,_,h,v]),(0,n.jsxs)("div",{className:l().body,children:[(0,n.jsxs)("div",{id:"loading",className:l().loading,children:[(0,n.jsx)("img",{className:l().loadingIcon,src:"/freeguessr/images/compass.svg",alt:"Loading"}),(0,n.jsx)("div",{children:"loading..."})]}),(0,n.jsxs)("div",{className:l().container,children:[(0,n.jsx)("button",{className:l().buttonRound,onClick:()=>t("rank"),children:"ランキングを見る"}),(0,n.jsxs)("div",{className:l().game,children:[(0,n.jsx)("input",{type:"radio",id:"national-map",name:"map",value:"national",defaultChecked:!0}),(0,n.jsxs)("label",{htmlFor:"national-map",className:l().mapLabel,children:[(0,n.jsx)("div",{children:"全国マップ"}),(0,n.jsx)("img",{className:l().mapIcon,src:"/freeguessr/images/japan.svg",alt:"Japan"})]}),(0,n.jsx)("input",{type:"radio",id:"local-map",name:"map",value:"local",disabled:!0}),(0,n.jsxs)("label",{htmlFor:"local-map",className:l().mapLabel,children:[(0,n.jsx)("div",{children:"自治体マップ"}),(0,n.jsx)("img",{className:l().mapIcon,src:"/freeguessr/images/hokkaido.svg",alt:"local government"}),(0,n.jsx)("div",{className:l().comingSoon,children:"近日実装予定"})]})]}),(0,n.jsx)("button",{className:"".concat(l().buttonRound," ").concat(l().startBtn),onClick:b,children:"START"}),(0,n.jsxs)("div",{className:l().box,children:[(0,n.jsxs)("div",{className:l().boxItem,children:[(0,n.jsx)("div",{children:"統一ルール"}),(0,n.jsx)("div",{className:l().toggle,children:(0,n.jsx)("label",{className:l().toggleButton,children:(0,n.jsx)("input",{type:"checkbox",checked:v,disabled:v,onChange:e=>j(e.target.checked)})})})]}),(0,n.jsxs)("div",{className:l().timeItem,children:[(0,n.jsx)("div",{children:"ラウンドタイム"}),(0,n.jsxs)("div",{className:l().sliderContainer,children:[(0,n.jsx)("input",{type:"range",className:l().slider,min:"0",max:"600",step:"10",value:d,readOnly:!0}),(0,n.jsx)("div",{className:l().limitTime,children:(()=>{if(600===d)return"無制限";let e=d+10,t=Math.floor(e/60);return"".concat(t>0?"".concat(t,"m"):"").concat(String(e%60).padStart(2,"0"),"s")})()})]})]}),(0,n.jsxs)("div",{className:l().features,children:[(0,n.jsx)(o,{title:"移動",icon:"/freeguessr/images/move.svg",enabled:m,onToggle:()=>u(!m)}),(0,n.jsx)(o,{title:"パン",icon:"/freeguessr/images/double-arrow.svg",enabled:_,onToggle:()=>x(!_)}),(0,n.jsx)(o,{title:"ズーム",icon:"/freeguessr/images/zoom.svg",enabled:h,onToggle:()=>p(!h)})]})]}),(0,n.jsx)("button",{className:l().buttonRound,onClick:()=>{if(window.confirm("ログアウトしてもよろしいですか？")){let e=e=>{document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")};e("username"),e("password"),location.reload()}},children:"ログアウト"})]})]})}},9009:e=>{e.exports={body:"settings_body__XQX_1",container:"settings_container__r4Gee",box:"settings_box__jGLiU",boxItem:"settings_boxItem__tIoTg",timeItem:"settings_timeItem__d524B",title:"settings_title__HbIV1",game:"settings_game__UOj18",mapIcon:"settings_mapIcon__nA0B7",comingSoon:"settings_comingSoon__nQXLZ",features:"settings_features__fnyAn",featureItem:"settings_featureItem__NwQey",toggle:"settings_toggle__zSp1h",toggleButton:"settings_toggleButton__PRrKg",sliderContainer:"settings_sliderContainer__Jk04r",limitTime:"settings_limitTime__jJVxI",slider:"settings_slider__6428c",buttonRound:"settings_buttonRound__h5N9H",startBtn:"settings_startBtn__ZlVuH",loading:"settings_loading__hnUWV",loadingIcon:"settings_loadingIcon__gFNxH",spin:"settings_spin__bLF0O"}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7778)),_N_E=e.O()}]);