(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[528],{7874:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/Result_daily",function(){return a(5114)}])},5114:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(4848),s=a(6540),o=a(9781),r=a.n(o);let l=e=>{let{setScreen:t,saveData:a,setSaveData:o,sender:l,getPlace:i}=e,[c,d]=(0,s.useState)(""),[g,u]=(0,s.useState)(""),[m,_]=(0,s.useState)(""),h=!0;(0,s.useEffect)(()=>{h&&(h=!1,p())},[]);let p=()=>{let e={stage:localStorage.getItem("stage"),lat:localStorage.getItem("lat"),lng:localStorage.getItem("lng"),guess_lat:localStorage.getItem("guess_lat"),guess_lng:localStorage.getItem("guess_lng"),move_count:localStorage.getItem("move_count")};d(e.stage);let t=L.map("guess_map_canvas",{zoomControl:!1});L.tileLayer("https://www.google.com/maps/vt?pb=!1m5!1m4!1i{z}!2i{x}!3i{y}!4i256!2m3!1e0!2sm!3i693439125!3m12!2sja!3sJP!5e289!12m4!1e68!2m2!1sset!2sRoadmap!12m3!1e37!2m1!1ssmartmaps!4e0!5m1!5f2",{attribution:"\xa9️ <a href='https://www.google.com/maps/' target='_blank'>Google</a>",maxZoom:20,maxNativeZoom:20}).addTo(t),new ResizeObserver(()=>{t.invalidateSize()}).observe(t._container);let a=L.latLng([Number(e.lat),Number(e.lng)]),n=-1,s=0;if(e.guess_lat){let o=L.icon({iconUrl:"/freeguessr/images/guess.svg",iconSize:[24,24],iconAnchor:[12,12]}),r=L.marker([Number(e.guess_lat),Number(e.guess_lng)],{icon:o}).addTo(t);L.polyline([a,r.getLatLng()],{color:"black",weight:2,dashArray:"4 4"}).addTo(t),t.fitBounds(L.latLngBounds([a,r.getLatLng()]),{padding:[30,30]}),s=Math.round(5e3*Math.exp(-((n=a.distanceTo(r.getLatLng()))/1e3)/212.856))}else t.setView([a.lat,a.lng],10);t.invalidateSize();let o=L.icon({iconUrl:"/freeguessr/images/flag.svg",iconSize:[25,50],iconAnchor:[12.5,47]});L.marker(a,{icon:o}).addTo(t);let r="";n>=0&&(r=n<1e3?Math.round(n).toLocaleString()+" m":n<1e4?(Math.round(n/100)/10).toLocaleString()+" km":Math.round(n/1e3).toLocaleString()+" km"),u(r);let l=s.toLocaleString();_(l+=1==s?" point":" points"),next_btn.addEventListener("click",()=>{location.href="/freeguessr"});let i="#FreeguessrJP\nDay".concat(e.stage,"\n\nDistance: ").concat(r,"\nPoints: ").concat(s.toLocaleString(),"\nMove: ").concat(e.move_count,"\n\nabshrimp.github.io/freeguessr/daily");share_btn.addEventListener("click",async()=>{if(navigator.share)try{await navigator.share({title:"FreeguessrJP",text:i,url:"https://abshrimp.github.io/freeguessr/daily"})}catch(e){}else window.clipboardData?(window.clipboardData.setData("Text",i),alert("クリップボードにコピーしました")):navigator.clipboard?(navigator.clipboard.writeText(i),alert("クリップボードにコピーしました")):alert("この端末は対応していません")}),tweet_btn.addEventListener("click",()=>{window.open("https://twitter.com/share?text="+encodeURIComponent(i),"_blank","noopener,noreferrer")})};return(0,s.useEffect)(()=>{let e=e=>{("Enter"===e.key||" "===e.key)&&"undefined"!=typeof next_btn&&next_btn.click()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[c,g,m]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:r()["guess-map"],children:(0,n.jsx)("div",{id:"guess_map_canvas",className:r()["guess-map-canvas"]})}),(0,n.jsxs)("div",{className:r().controls,children:[(0,n.jsx)("div",{className:r().round,children:(0,n.jsxs)("div",{children:["Day ",c]})}),(0,n.jsxs)("div",{className:r()["results-container"],children:[(0,n.jsx)("div",{children:g}),(0,n.jsx)("div",{children:m})]}),(0,n.jsxs)("div",{className:r()["results-container"],children:[(0,n.jsx)("button",{id:"share_btn",className:r()["next-btn"],children:"共有する"}),(0,n.jsx)("button",{id:"tweet_btn",className:r()["next-btn"],children:"ツイート"}),(0,n.jsx)("button",{id:"next_btn",className:r()["next-btn"],children:"ホームへ"})]})]})]})}},9781:e=>{e.exports={"guess-map":"result_guess-map__WxqEP","guess-map-canvas":"result_guess-map-canvas__mCAu7",controls:"result_controls__PeGYl","results-container":"result_results-container__FlTml",round:"result_round__Sm0e2","next-btn":"result_next-btn__VLj7M",loading:"result_loading__xfA6c",loadingIcon:"result_loadingIcon__tnSEj",spin:"result_spin__WS2lf"}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7874)),_N_E=e.O()}]);